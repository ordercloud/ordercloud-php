<link rel="import" href="pages/introduction.html">
<link rel="import" href="pages/installation.html">
<link rel="import" href="pages/configuration.html">
<link rel="import" href="pages/changelog.html">

<link rel="import" href="pages/entities.html">
<link rel="import" href="pages/services.html">
<link rel="import" href="pages/requests.html">
<link rel="import" href="pages/client.html">

<!--
    We use Page.js for routing. This is a Micro
    client-side router inspired by the Express router
    More info: https://visionmedia.github.io/page.js/
-->
<script src="../bower_components/page/page.js"></script>

<script type="application/javascript">
window.addEventListener('WebComponentsReady', function () {

    var app = document.querySelector('#app');

    app.routes = {
      'introduction': {
        uri: '/introduction',
        title: 'Introduction'
      },
      'installation': {
        uri: '/installation',
        title: 'Installation'
      },
      'configuration': {
        uri: '/configuration',
        title: 'Configuration'
      },
      'changelog': {
        uri: '/changelog',
        title: 'Changelog'
      },
      'client': {
        uri: '/client',
        title: 'Client'
      },
      'entities': {
        uri: '/entities',
        title: 'Entities'
      },
      'services': {
        uri: '/services',
        title: 'Services'
      },
      'requests': {
        uri: '/requests',
        title: 'Requests'
      },
      'monolog': {
        uri: '/monolog',
        title: 'Monolog'
      },
      'laravel': {
        uri: '/laravel',
        title: 'Laravel'
      }
    };

    // Scroll to top on each new page
    page(function (ctx, next) {
        app.scrollPageToTop();
        next();
    });

    // Register routes
    for (var route in app.routes) {
        registerPage(route, app.routes[route]);
    }

    // Defualt
    page.redirect('/ordercloud-php/', '/introduction');

    // 404 handler
    page('*', function (ctx, next) {
        console.error('route not found', {'ctx': ctx});
        page('/introduction');
    });

    // add #! before urls
    page({
        hashbang: true
    });

    function registerPage(route, routeDetails) {
        page(routeDetails.uri, function () {
            app.route = route;
            app.title = routeDetails.title;
        });
    }

});
</script>
